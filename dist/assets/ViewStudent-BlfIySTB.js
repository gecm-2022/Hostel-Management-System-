import{u as j,r as m,j as e,a as w,b as f}from"./index-CogtV_fi.js";const F=()=>{const{monthlyFeeViews:h,studentViews:t,MarkFeePaid:i,viewStudent:s,dashboard:b,DownloadReceipt:u}=j(),[d,l]=m.useState(!1),[o,x]=m.useState(null);let p=0;const g=async(a,n)=>{if(window.confirm("Are you sure you want to mark this fee as paid?")){l(!0),x(n);try{await i(a,n),await s(a),await b()}catch(r){console.error("Error marking fee as paid:",r)}finally{l(!1),x(null)}}},y=async(a,n,r)=>{await u(a,n,r)};return e.jsxs(e.Fragment,{children:[h.map((a,n)=>{const r=`${a.month} ${a.year}`,c=t.pendingFees[r],N=t.paymentDateTime?t.paymentDateTime[r]:null;return c&&(p+=a.feeAmount),e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"p-2 border",children:r}),e.jsx("td",{className:"p-2 border",children:a.feeAmount}),e.jsx("td",{className:"p-2 border",children:c?"Yes":"No"}),e.jsx("td",{className:"p-2 border",children:N||"N/A"}),e.jsx("td",{className:"p-2 border",children:e.jsx("div",{className:"flex gap-2",children:c?e.jsx("button",{className:`bg-blue-500 text-white px-2 py-1 rounded ${d&&o===r?"opacity-50 cursor-not-allowed":""}`,onClick:()=>g(t._id,r),disabled:d&&o===r,children:d&&o===r?"Processing...":"Mark as Paid"}):N?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-gray-500 text-white px-2 py-1 rounded",disabled:!0,children:"Fees Paid"}),e.jsx("button",{onClick:()=>y(t._id,a.month,a.year),className:"bg-green-500 text-white px-2 py-1 rounded",children:"Download Receipt"})]}):e.jsx("button",{className:"bg-gray-500 text-white px-2 py-1 rounded",disabled:!0,children:"Not Applicable"})})})]},n)}),e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"Total Pending Fees"}),e.jsx("td",{colSpan:"4",className:"p-2 border",children:p})]})]})},k=({user:h})=>{const{id:t}=w(),{viewStudent:i,studentViews:s,MarkFeePaid:b,pendingFees:u}=j(),d=f();return m.useEffect(()=>{t&&i(t)},[t]),s?e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"View Student"}),e.jsx("table",{className:"min-w-full border-collapse border border-gray-200 mb-4",children:e.jsx("tbody",{children:[["Full Name",s.fullName],["Email",s.email],["Room Number",s.roomNumber],["Branch",s.branch],["Batch",s.batch],["Gender",s.gender],["Mobile Number",s.mobileNumber],["Enrollment Number",s.enrollmentNumber]].map(([l,o])=>e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"p-2 border",children:l}),e.jsx("td",{className:"p-2 border",children:o})]},l))})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Monthly Fees"}),e.jsxs("table",{className:"min-w-full border-collapse border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border",children:[e.jsx("th",{className:"p-2 border",children:"Month"}),e.jsx("th",{className:"p-2 border",children:"Fee Amount"}),e.jsx("th",{className:"p-2 border",children:"Pending"}),e.jsx("th",{className:"p-2 border",children:"Payment Date"}),e.jsx("th",{className:"p-2 border",children:"Actions"})]})}),e.jsx("tbody",{children:e.jsx(F,{})})]}),e.jsx("button",{className:"bg-gray-500 text-white px-4 py-2 rounded",onClick:()=>d("/admin/dashboard"),children:"Back to Admin Page"})]}):e.jsx("div",{children:"No data found"})};export{k as default};
